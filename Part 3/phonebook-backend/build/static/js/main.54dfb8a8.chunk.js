(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t(15),c=t.n(a),u=(t(20),t(6)),o=t(3),i=t(4),d=t.n(i),l="/api/persons",s={read:function(){return d.a.get(l).then((function(e){return e.data}))},create:function(e){return d.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(l,"/").concat(e,"/"),n).then((function(e){return e.data}))},deleteEntry:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},f=t(0),h=function(e){var n=e.message;if(null===n)return null;var t={color:n.toLowerCase().includes("added")||n.toLowerCase().includes("changed")?"green":"red",borderColor:n.toLowerCase().includes("added")||n.toLowerCase().includes("changed")?"green":"red"};return Object(f.jsx)("div",{className:"notification",style:t,children:n})};t(40);var b=function(e){var n=e.value,t=e.handleChange;return Object(f.jsxs)(f.Fragment,{children:["Filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.handleSubmit,t=e.nameValue,r=e.numberValue,a=e.handleNameChange,c=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["Name : ",Object(f.jsx)("input",{value:t,onChange:a})]}),Object(f.jsxs)("div",{children:["Number : ",Object(f.jsx)("input",{value:r,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Add"})})]})},j=function(e){var n=e.persons,t=e.handleClick;return Object(f.jsx)(f.Fragment,{children:n.map((function(e){return Object(f.jsx)(O,{name:e.name,number:e.number,handleClick:t},e.name)}))})},O=function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return e.handleClick(e.name)},children:"Delete"})]})},v=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),d=i[0],l=i[1],O=Object(r.useState)(""),v=Object(o.a)(O,2),g=v[0],p=v[1],x=Object(r.useState)(""),C=Object(o.a)(x,2),w=C[0],k=C[1],y=Object(r.useState)(null),L=Object(o.a)(y,2),N=L[0],S=L[1];return Object(r.useEffect)((function(){s.read().then((function(e){a(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(h,{message:N}),Object(f.jsx)(b,{value:w,handleChange:function(e){return k(e.target.value)}}),Object(f.jsx)("h2",{children:"Add a new"}),Object(f.jsx)(m,{handleSubmit:function(e){if(e.preventDefault(),0!==d.length&&0!==g.length){if(-1!==t.map((function(e){return e.name.toLowerCase()})).indexOf(d.toLowerCase().trim())){if(console.log(t),-1===t.map((function(e){return e.number})).indexOf(g.trim())){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===d})),r=Object(u.a)(Object(u.a)({},n),{},{number:g});s.update(n.id,r).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),l(""),p(""),S("".concat(e.name,"'s number is changed to: ").concat(e.number)),setTimeout((function(){return S(null)}),2500)})).catch((function(e){S("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){return S(null)}),2500),a(t.filter((function(e){return e.id!==n.id})))}))}return}return S("".concat(d," is already added to phonebook")),void setTimeout((function(){return S(null)}),2500)}var c={name:d,number:g};s.create(c).then((function(e){a(t.concat(e)),l(""),p(""),S("Added ".concat(e.name)),setTimeout((function(){return S(null)}),2500)})).catch((function(e){S("".concat(c.name," ").concat(c.number," can't be added")),setTimeout((function(){return S(null)}),2500)}))}},nameValue:d,numberValue:g,handleNameChange:function(e){return l(e.target.value)},handleNumberChange:function(e){return p(e.target.value)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(j,{persons:0===w.length?t:t.filter((function(e){return function(e){for(var n=0;n<w.length;n++)if(e.name.toLowerCase().charAt(n)!==w.trim().toLowerCase().charAt(n))return!1;return!0}(e)})),handleClick:function(e){if(window.confirm("Delete ".concat(e," ?"))){var n=t.find((function(n){return n.name===e})).id;s.deleteEntry(n).then((function(r){a(t.filter((function(e){return e.id!==n}))),S("".concat(e," has been deleted")),setTimeout((function(){return S(null)}),2500)})).catch((function(r){S("Information of ".concat(e," has already been removed from server")),setTimeout((function(){return S(null)}),2500),a(t.filter((function(e){return e.id!==n})))}))}}})]})};c.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.54dfb8a8.chunk.js.map